name: Apply frontend Helm Chart to AKS

on:
  push:
    paths:
      - './kubernetes/webapp-helm-charts/helm-charts/website-chart/values.yaml'

jobs:
  deploy:
    name: Deploy Helm Chart
    runs-on: ubuntu-latest

    steps:
    - name: Set up kubectl
      uses: azure/k8s-set-context@v1
      with:
        kubeconfig: ${{ secrets.KUBE_CONFIG_DATA }}

    - name: Install Helm
      uses: azure/setup-helm@v1

    - name: Apply Helm Chart
      run: |
        helm upgrade --install <release_name> <chart_directory> --namespace <namespace> -f values.yaml
